<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Todo List </title>
	<!-- CSS Import -->
	<link rel="stylesheet" href="/css/main.css" />
	<!-- End of CSS Import -->
	<!-- Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,400;0,700;0,900;1,400&family=Montserrat:ital,wght@0,400;0,700;0,900;1,400&display=swap" rel="stylesheet">
	<!-- End of Fonts -->

	<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
</head>
<body>
	
	<header>
	<form action="index.html">
		<button type="submit" value="Submit" class="logoutbtn">Logout</button>
	</form>
	<!-- App Wrapper -->
	<main class="app">
		<!-- Greeting -->
			<section>
			
			
				<h2 class="title">
					What's up,&nbsp;<span id="displayName"></span>
				</h2>
			
			
			</section>
		</header>
		<!-- End of Greeting -->
		
		<!-- New Todo -->
		<section class="plan">
		<!-- Todo List -->
			
			<div class="date">
				todo list</br>
				<div class="dateborder">
    				<span id="datetime"></span>
				</div>
				<div class="gif">
					<img src="./assets/dog-cheer.gif">
				</div>
			</div>
			<div class="todo">
				
					
				<div class="container">
					<div class="todoApp">
						<h2>Personal</h2>
						<div class="row">
							<input type="text" id="inputBox1" placeholder="Add your task">
							<button onclick="addTask(inputBox1,listContainer1)">+</button>
						</div>
						<ul id="listContainer1">

						</ul>
					</div>
				</div>
				<div class="container">
					<div class="todoApp">
						<h2>Business</h2>
						<div class="row">
							<input type="text" id="inputBox2" placeholder="Add your text">
							<button onclick="addTask(inputBox2,listContainer2)">+</button>
						</div>
						<ul id="listContainer2">
							
						</ul>
					</div>
				</div>
				<div class="container">
					<div class="todoApp">
						<h2>Work</h2>
						<div class="row">
							<input type="text" id="inputBox3" placeholder="Add your text">
							<button onclick="addTask(inputBox3,listContainer3)">+</button>
						</div>
						<ul id="listContainer3">
						</ul>
					</div>
				</div>
				<div class="container">
					<div class="todoApp">
						<h2>Health</h2>
						<div class="row">
							<input type="text" id="inputBox4" placeholder="Add your text">
							<button onclick="addTask(inputBox4,listContainer4)">+</button>
						</div>
						<ul id="listContainer4"></ul>
					</div>
				</div>
			
				<div class="container">
					<div class="todoApp">
						<h2>Chores</h2>
						<div class="row">
							<input type="text" id="inputBox5" placeholder="Add your text">
							<button onclick="addTask(inputBox5,listContainer5)">+</button>
						</div>
						<ul id="listContainer5">
						</ul>
					</div>
				</div>
				<div class="container">
					<div class="todoApp">
						<h2>Learn</h2>
						<div class="row">
							<input type="text" id="inputBox6" placeholder="Add your text">
							<button onclick="addTask(inputBox6,listContainer6)">+</button>
						</div>
						<ul id="listContainer6">
						
						</ul>
					</div>
				</div>
			</div>	
		
	</section>
<!-- End of Todo List -->
	</main>
	<!-- End of App Wrapper -->

	<script src="firebase.js"></script>
	<script src="main.js"></script>
	<script>
		function addCheckbox() {
    // Get the value from the input field
				const customText = document.getElementById('customText').value.trim();
				
				// Only add a checkbox if there is custom text
				if (customText !== '') {
					// Create a new checkbox
					const checkboxList = document.getElementById('checkboxList');
					const listItem = document.createElement('li');
					const checkbox = document.createElement('input');
					checkbox.type = 'checkbox';
					checkbox.id = 'checkbox_' + Date.now(); // Generate unique ID
					listItem.appendChild(checkbox);
					
					// Create a label for the checkbox
					const label = document.createElement('label');
					label.htmlFor = checkbox.id;
					label.textContent = customText;
					listItem.appendChild(label);
					
					// Append the new checkbox to the list
					checkboxList.appendChild(listItem);
					
					// Clear the input field
					document.getElementById('customText').value = '';
				}
  		}
	</script>
	<script>
		// create a function to update the date and time
		function updateDateTime() {
		  // create a new `Date` object
		  const now = new Date();
  
		  // get the current date and time as a string
		  const currentDateTime = now.toLocaleString();
  
		  // update the `textContent` property of the `span` element with the `id` of `datetime`
		  document.querySelector('#datetime').textContent = currentDateTime;
		}
  
		// call the `updateDateTime` function every second
		setInterval(updateDateTime, 1000);
	</script>		

	<script>
		const userData = JSON.parse(localStorage.getItem('user'));
		console.log(userData);
		const fetchDisplayNameFromFirestore = async () => {
			try {
				const snapshot = await db.collection('users').get(); // เลือกคอลเล็กชันที่ต้องการดึงข้อมูล
				snapshot.forEach(doc => {
					if (doc.id === userData.uid) { // เปรียบเทียบ uid ของเอกสารกับ uid ของผู้ใช้ที่ล็อกอิน
                		const userData = doc.data().displayName; // ดึงข้อมูลผู้ใช้จากเอกสาร
                		console.log(userData); // แสดงข้อมูลผู้ใช้ในคอนโซล
						document.getElementById('displayName').textContent = userData;
            }
				});
			} catch (error) {
				console.error('Error fetching displayName:', error);
			}
		};
	
		// เรียกใช้งานฟังก์ชันดึงข้อมูล displayName
		fetchDisplayNameFromFirestore();
	</script>

</body>
</html>